<h1 align="center">基于YOLOv5的道路标志识别项目（yolov5界面GUI）</h1>
<p align="center">
  <a href="README.md">English</a> |
  <a href="README_cn.md">简体中文</a>
</p>


这是一个关于yolov5的道路标志识别项目，使用Pyqt5开发界面，Yolov5训练模型，数据库Mysql，包含五个模块：初始化参数、标志识别、数据库、数据分析和图像处理。

## 软件截图

* ### 标志识别模块
  ![img.png](img.png)

  标志识别模块首先提供给用户一个可选择模型的选项，用户将已经训练好的模型放入指定的文件夹，程序会自动搜索模型，检测过程中用户可根据模型的表现优劣更换不同的模型。完成模型选择操作之后，用户可选择三种输入格式：
  1. 图像文件：支持从本地存储的图像文件（如JPEG、PNG等格式）读取数据。
  2. 视频文件：支持从本地存储的视频文件（如MP4、AVI等格式）逐帧读取数据。
  3. 视频流：支持从实时视频源（如摄像头捕获的画面RTSP等）获取数据。

  接着，点击开始识别按钮，模型将进行推理，模型会将检测到的结果和置信度的信息输出到预警结果界面，用户可随时暂停检测进程，检测结束需点击关闭按钮以便执行其他模块操作时线程不会冲突，在检测进程中，系统支持动态调整IOU、Conf等推理参数，用户可根据模型推理的表现，实时调整这两个参数，同时，系统也提供检测速度的调整功能，只需勾选speed 按钮即可，最后对于模型的推理速度，系统在界面的右上角会实时显示FPS，同时对于用户点击按钮功能相关操作，系统将日志信息打印在界面的右下角，方便用户查看。

  以上是标志识别模块的基本功能，除此以外，该模块还提供三个基本功能以外的操作：
  1. 推理结果保存：该功能需要手动勾选，勾选后，系统将会把模型推理的结果保存到相应的文件夹。
  2. 数据录入数据库：勾选该功能后，模型将会在检测推理输入数据的同时将检测结果实时保存录入本地数据库，此功能为后续数据库模块和数据分析模块提供支持，同时如果勾选该功能，模型检测的FPS将大幅下降，不过，用户可选择将检测结果先缓存到文本文件，随后检测结束之后再导入数据库。
  3. 可视化模型：在运行模型时可视化模型在不同的卷积层和激活函数上产生的特征映射，这对于分析模型的行为、调试模型以及理解模型如何理解输入图像特别有用。
  
* ### 图像处理与数据增强模块
  ![img_1.png](img_1.png)
  1. 在这些基本的图像处理方法上，系统为某些可以输入具体参数的图像处理方法，提供相应的参数自定义功能，可根据相应的滑条或者弹窗输入对应的参数值（比如使用红蓝滑条调整色相调整参数值），同时另外两个滑条提供图像的  翻转和缩放功能，在每个图像增强方法右边，系统提供预览功能，可以让用户在进行某种图像增强方法之前，提前预览图片的输出结果，图片的输出结果将展示在正下角长方形显示区域内；在用户完成基本的图像处理方法之后，用户可选择特定的文件夹，保存处理后的图片结果。
  2. 除图像处理模块外，系统界面右侧栏的数据增强模块提供批量指定参数的批量数据增强功能，这些数据增强参数除了常规的数据增强方法，还复现了YOLO算法中的Mixup、Cutout、Mossic;程序会根据用户指定的图像增强概率对一个文件夹中的图片按此概率随机使用选择的数据增强参数,同时某些数据增强参数，不可配合使用,比如MIXUP和MOSIC，系统提供相关参数组合的推荐方案和教程视频，如果用户选择不当的参数组合方案，系统会弹出错误弹窗。

* ### 初始化参数模块
  ![img_2.png](img_2.png)
* ### 数据库模块
  ![img_3.png](img_3.png)
  
  数据显示：从数据库抓去数据，显示到系统界面，数据表中的信息包括ID、sign_type(标志类别)、sign_count(标志数量)、detection_time(检测时间)、addition_info(附加信息conf等）；
  1. 数据插入：插入一行信息导入数据库，系统将以弹窗形式接收用户插入信息；
  2. 数据删除：删除某一行选定的信息，用户可直接手动点击某一行进行删除，系统弹出确认按钮；
  3. 数据筛选：根据用户输入的sign_count(标志数量）最小值筛选出符合规则的数据。
  4. 数据排序：系统提供按检测时间或标志数量进行递增或递减的排序，用户可选择相应的组合按钮。
  5. 数据库基本操作模块结束后，系统提供数据分析功能，该模块包含四种数据分析图表，每种分析图表按照数据表中相应的属性列之间的相互关系进行绘制图表，比如直方图，按照检测到的标志种类和检测数量绘制而形成。
  
* ### 数据分析模块
  ![img_4.png](img_4.png)
* ### 登录界面
  ![img_5.png](img_5.png)

### 视频

[基于YOLOV5的道路标志识别系统](https://www.bilibili.com/video/BV1Ck4y1Y7Bk/?spm_id_from=333.999.0.0&vd_source=40d9cda43378fbc89cd5184e09bf1272)

## 开始

运行`main.py`。

### 账户密码

- admin 123456
- 1 2
- 修改main函数可直接进入

## 项目模块

- `pt`文件夹：存放模型
- `main_with`文件夹：`login.py`(登陆ui)、`win.py`(主ui)
- `dialog`文件夹：rtsp弹出界面
- `apprcc_rc.py`：资源文件
- `login_ji.py`：界面登陆逻辑文件
- `run-exp52`：300轮训练后的道路标志识别模型
- `tt100k_to_voc-main`文件夹：json转yolo格式
- 数据集：[TT100k : Traffic-Sign Detection and Classification in the Wild](https://cg.cs.tsinghua.edu.cn/traffic-sign/)


### 安装依赖

pip install -r requirements.txt

## 致谢

- [将TT100K数据集转成VOC格式，并且用Python脚本选出45类超过100张的图片和XML](https://blog.csdn.net/Hankerchen/article/details/120727299?spm=1001.2014.3001.5502)
- https://github.com/Javacr/PyQt5-YOLOv5
